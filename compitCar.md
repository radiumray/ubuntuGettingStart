# 图形化接口


## 在小车中会有一个compitCar文件夹，这里存放着针对比赛的所有资源

## 其中youDiy.py为同学通过图形化拖拽出来的代码文件此文件需要通过　米思奇　软件上传到车上

## 采集数据和训练还沿用原来的方法，只不过用UI进行训练后要把LR_toolkit/output生成的xxx.h5模型放到compitCar/output中去

### 用户自定义拖拽块
```py


+--+     +--------------------------------------+
|  +-----+                                      |
|     比赛图形块                                 |
|                                               |
|        +--------------------------------------+
|        |
|        |
|        |
|        |
|        +--------------------------------------+
|                                               |
|                                               |
|                                               |
+--+     +--------------------------------------+
   +-----+



def diy(action, controlThrottle):
  xxxxxx
  xxxxxx
  xxxxxx


```

### 识别标志


```py


    +-----------------+
    |                 |
+---+                 |
|          检测识别   |
+---+                 |
    |                 |
    +-----------------+


action



    +-----------------+
    |                 |
+---+                 |
|          停止标志   |
+---+                 |
    |                 |
    +-----------------+


stop


    +-----------------+
    |                 |
+---+                 |
|          向右标志   |
+---+                 |
    |                 |
    +-----------------+


right


    +-----------------+
    |                 |
+---+                 |
|          向左标志   |
+---+                 |
    |                 |
    +-----------------+


left


    +-----------------+
    |                 |
+---+                 |
|          限速50     |
+---+                 |
    |                 |
    +-----------------+


50

    +-----------------+
    |                 |
+---+                 |
|          限速80     |
+---+                 |
    |                 |
    +-----------------+


80

    +-----------------+
    |                 |
+---+                 |
|          行人减速   |
+---+                 |
    |                 |
    +-----------------+


person_slow


    +-----------------+
    |                 |
+---+                 |
|          行人停止   |
+---+                 |
    |                 |
    +-----------------+

person


```


### 执行任务

```py
# 范围:-1~+1
# -1.0:向左打轮打死,1.0:向右打轮打死
# -1.0:倒车最大速度,1.0:前进最大速度


+--+     +------------------------------------------+
|  +-----+                                          |
|      倒车入库: 角度:（0.５） 速度:（0.２）运行（２）秒     |
|                                                   |
+--+     +------------------------------------------+
   +-----+

backupCar(-1.0, -0.14, 2)


+--+     +------------------------------------------+
|  +-----+                                          |
|      控制: 角度:（0.５） 速度:（0.２）运行（２）秒     |
|                                                   |
+--+     +------------------------------------------+
   +-----+

doingCar(1.0, 0.12, 3)


+--+     +------------------------------------------+
|  +-----+                                          |
|      限速: 比例:（0.５） 运行（２）秒     |
|                                                   |
+--+     +------------------------------------------+
   +-----+

speedCar(0.5, controlThrottle, 3)




```




### 运行脚本compitCar.py 此文件需要通过　米思齐　软件远程调用
```bash


# 启动小车调用xxx.h5模型指令
python compitCar.py --model=./output/oldCqCompit.h5 --control --web
# 采集数据指令
python compitCar.py --js --control --data



```



### 示例代码
```py

def diy(action, controlThrottle):
    if action == 'stop':
        backupCar(-1.0, -0.14, 2)
    elif action in ['left', 'right']:
        doingCar(1.0, 0.12, 3)
    elif action == '50':
        speedCar(0.5, controlThrottle, 2)
    elif action == '80':
        speedCar(0.8, controlThrottle, 2)
    elif action == 'person_slow':
        speedCar(0.4, controlThrottle, 2)
    elif action == 'person':
        speedCar(0.0, controlThrottle, 2)
        
        

```

### 调试方法
```bash
# 当用图形化控制车时候，遇到没有反应的情况，最直接高效的方法就是在车本地用命令行执行，看看会报什么错误
cd compitCar
python compitCar.py --model=./output/xxxxx.h5 --control --web
# 找到错误能够第一时间定位问题


```

